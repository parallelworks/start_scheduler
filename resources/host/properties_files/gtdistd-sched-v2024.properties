################################################################################
#                                                                              #
#             I M P O R T A N T:   DO NOT EDIT THIS FILE DIRECTLY!             #
#                                                                              #
#      It's a sample file that may change every time GT-SUITE is updated.      #
#     Please make a copy of this file outside of the installtion directory     #
#          and apply all your changes in that instance of the file.            #
#                                                                              #
################################################################################

#
#                    CONFIGURATION FOR DISTRIBUTED SCHEDULER
#                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

# FILE AND DIRECTORY PATHS...
#         On Windows use either forward slashes or _double_ back slashes as
#         separators within paths--single back slashes will result in a
#         configuration error. We recommend to apply forward slashes
#         regardless of the operating system.

# VARIABLE SUBSTITUTION...
#         Any property value or a part thereof may include a reference to
#         another property or an operating system environment variable
#         using "${property-or-variable-name}" syntax. Mind the capitalization!

# Working directory. Choose a local file system with enough space. This location
# will be used to store job resources and execution node state. This directory
# MUST EXIST when application is started. On Windows, either forward slashes or
# double back slashes must be used as path separators--single back slashes will
# result in a configuration error.
GTDistributed.work-dir                                  =

# Port number for connections from clients (e.g. Gt-ise).
GTDistributed.grpc.port                                 = 10970

# Port number for connections from executors.
GTDistributed.grpc.executor.port                        = 10971

# Port listening for connections from pre-v2022 client (e.g. Gt-ise 2021 and prior).
GTDistributed.client.port                               = 8970

# Whether to activate a built-in web server providing scheduler status
# information. Connect in web browser using the format hostname:port
GTDistributed.web.enable                                = true

# Port number for the web server.
GTDistributed.web.port                                  = 8979

# Whether to allow GT-ISE older than v2017 to connect to this scheduler.
# If true, v2016, v7.5 and earlier can submit jobs to this scheduler.
# If false, only jobs from v2017 and later will be accepted.
GTDistributed.legacy.enable                             = true

# Port number for connection of v2016 and earlier to 2nd generation distributed.
# This needs to be entered in GT-ISE clients v2016, v7.5 and earlier.
GTDistributed.legacy.port                               = 3491

# Optional custom pre-processing script executed before the multicollector.
# On Windows, either forward slashes or  double back slashes must be used as
# path separators--single back slashes will result in a configuration error.
GTDistributed.multic.user-preproc-script                =

# Optional custom post-processing script executed after the multicollector.
# On Windows, either forward slashes or  double back slashes must be used as
# path separators--single back slashes will result in a configuration error.
GTDistributed.multic.user-postproc-script               =

################################################################################
#                         TLS Configuration                                    #
################################################################################
# Administrators may desire to configure distributed with their own certificate so that
# applications can appropriately authenticate the scheduler when using the grpc (recommended)
# connection mode. In that case, a certificate and private key must be provided. If no certificate
# is configured, the scheduler will generate a self-signed certificate to use in the TLS handshake.
# Note: Configuring TLS here will only encrypt the gRPC connection type, not the older gdc
# connection type.

# See the README_TLS_Setup.md file for a detailed guide on configuring these properties.

# Path to a PEM formatted file containing a X509 chain of certificate(s) to be used by the
# scheduler. This file should contain the public certificate, and any intermediate certificates
# needed in the TLS handshake. On Windows, either forward slashes or double back slashes must be
# used as path separators--single back slashes will result in a configuration error.
#GTDistributed.tls.certificate-path =

# Path to an unencrypted private key file in PKCS#1 or PKCS#8 format. On Windows, either forward
# slashes or  double back slashes must be used as path separators--single back slashes will result
# in a configuration error.
#GTDistributed.tls.private-key-path =

# In the case that no keystore with the private key and public certificate are provided by
# the administrator for the scheduler, a self signed certificate is created and saved. This
# property specifies the location on the filesystem that the self signed certificate and
# private keys will be generated if no keystore is specified. On Windows, either forward slashes or
# double back slashes must be used as path separators--single back slashes will result in a
# configuration error.
#GTDistributed.tls.self-signed-certificate-directory = ${GTDistributed.work-dir}/self-signed-certs

# A list of subject alternative names for the self signed certificate that the scheduler
# generates in the self-signed certificate directory. Names can be fully qualified domains,
# wildcard domains, or ip addresses. The first name will also be set as the common name in the
# certificate.
#
# When changing this property, you must delete any old self signed certificates in the
# certificate directory in order for the certificate to be regenerated.
#
# The list of domain names should be an unquoted string of names delimited by commas. Ip addresses
# and domain wildcards are permitted.
#
# Ex: company.com,prefix.company.com,*.company.com,172.32.0.134
#GTDistributed.tls.self-signed-certificate-domain-names =
################################################################################
#                         OPTIONAL SETTINGS OF INTEREST                        #
################################################################################
# Default values below are commented out. They should be good in most
# circumstances.

# Number of scheduler worker threads used for long-running tasks.
# Default = 10.
# Note that this number has NO direct relation to number of cores on the
# scheduler machine. The thread count should be higher as the cluster size
# (number of cores running GT jobs) increases.
GTDistributed.scheduler.thread-count                    = 20

# Maximum total number of cores that can be used by the whole system.
# Default = -1 (< 0 = don't check; 0 = inhibit executions).
# For runs using the parallel solver, the number of cores used will exceed the
# number of licenses used.
# This property may be changed without restarting the server.
GTDistributed.scheduler.max-cores                       = 500
# Maximum number of cores that can be used by a single user when the cluster is under load.
# Default = -1 (< 0 = don't check; 0 = inhibit executions).
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-cores-per-user              = -1

GTDistributed.scheduler.max-parallel-cores-per-solver = 1
GTDistributed.scheduler.validation.max-parallel-cores-per-solver    = REQUIRED
GTDistributed.scheduler.validation.outdated-scheduler = REQUIRED

# Maximum number of cores that can be used by a single user regardless of cluster load.
# Default = -1 (< 0 = don't check).
# If this property is used (not < 0) it must be strictly larger than the value of the
# GTDistributed.scheduler.max-cores-per-user property.
# This property may be changed by the users; server restart is not required.
#GTDistributed.scheduler.max-cores-per-user-overflow      = -1

# Maximum number of cores that can be used by a single simulation.
# Default = -1 (< 0 = don't check; 0 = inhibit executions).
# Users can override this value for a given job during submission, subject to
# max-cores-per-batch-limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-cores-per-batch             = -1

# Maximum valid value of scheduler.max-cores-per-batch job property.
# If you modify this value, you should set a value other than -1 for
# max-cores-per-batch.
# Default = 10000 (must be greater than 0).
# Users can override the max cores for a given job during submission.
# It will be compared to this limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-cores-per-batch-limit       = 10000

# Maximum total number of licenses that can be checked out by this scheduler.
# Default = -1 (< 0 = don't check; 0 = inhibit executions).
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-licenses                    = -1

# Optional settings of maximum number of licenses per license type.
#GTDistributed.scheduler.max-licenses.GTSUITE                    = -1
#GTDistributed.scheduler.max-licenses.GTSUITEMP                  = -1
#GTDistributed.scheduler.max-licenses.GTPOWERX                   = -1
#GTDistributed.scheduler.max-licenses.GTPOWERXRT                 = -1
#GTDistributed.scheduler.max-licenses.GTXLINK                    = -1
#GTDistributed.scheduler.max-licenses.GTAUTOLIONONED             = -1
#GTDistributed.scheduler.max-licenses.GTPOWERLAB                 = -1
#GTDistributed.scheduler.max-licenses.COSIMTHERMAL               = -1
#GTDistributed.scheduler.max-licenses.GTADVANCEDCOMBUSTION       = -1
#GTDistributed.scheduler.max-licenses.GTAUTOLIONTHREED           = -1
#GTDistributed.scheduler.max-licenses.GTLINEAR                   = -1
#GTDistributed.scheduler.max-licenses.GTJMAGMACHINE              = -1
#GTDistributed.scheduler.max-licenses.GTTHREEDMBD                = -1
#GTDistributed.scheduler.max-licenses.GTTHREEDMBDADVANCEDTRIBOLOGY = -1
#GTDistributed.scheduler.max-licenses.GTTHREEDMBDMACHINERY       = -1
#GTDistributed.scheduler.max-licenses.GTTHREEDMBDVEHICLEDYNAMICS = -1

# Maximum number of licenses that can be checked out by a single user.
# Default = -1 (< 0 = don't check; 0 = inhibit executions).
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-licenses-per-user           = -1

# Maximum number of licenses that can be checked out by a single simulation.
# Default = -1. (< 0 = don't check; 0 = inhibit executions).
# Users can override this value for a given job during submission, subject to
# max-licenses-per-batch-limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-licenses-per-batch          = -1

# Maximum valid value of scheduler.max-licenses-per-batch job property.
# If you modify this value, you should set a value other than -1 for
# max-licenses-per-batch.
# Default = 10000 (must be greater than 0).
# Users can override number of licenses for a given job during submission.
# It will be compared to this limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-licenses-per-batch-limit    = 10000

# Default minimum number of cases to include in a packet.
# Default = -1 (< 0 = don't check; 0 = invalid;
#     must be no greater than min-cases-per-packet-limit).
# Users can override this value for a given job during submission subject to
# min-cases-per-packet-limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.min-cases-per-packet            = -1

# Maximum valid value of min-cases-per-packet.
# If you modify this value, you should set a value other than -1 for
# min-cases-per-packet.
# Default = 10000 (must be greater than 0).
# Users can set a value of min cases per packet during submission.
# It will be compared to this limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.min-cases-per-packet-limit      = 10000

# Default maximum number of cases to include in a packet.
# Default = -1 (< 0 = don't check; 0 = invalid;
#     must be no greater than max-cases-per-packet-limit).
# Users can override this value for a given job during submission subject to
# max-cases-per-packet-limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-cases-per-packet            = -1

# Maximum valid value of max-cases-per-packet.
# If you modify this value, you should set a value other than -1 for
# max-cases-per-packet-limit.
# Default = 10000 (must be greater than 0).
# Users can set a value of max cases per packet during submission. It will be
# compared to this limit.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-cases-per-packet-limit      = 10000

# Minimum effective number of cores in the system to use when splitting cases.
# Default = 10 (< 0 = don't check; 0 = invalid;
#     must be no greater than max-effective-cores).
# If the actual number of available cores falls below this limit, the scheduler
# uses this value to calculate case splits.
# This property may be changed without restarting the server.
GTDistributed.scheduler.min-effective-cores             = 1000

# Maximum effective number of cores in the system to use when splitting cases.
# Default = 10000 (< 0 = don't check; 0 = invalid;
#     must be no less than min-effective).
# If the actual number of available cores exceeds this limit, the scheduler uses
# this value to calculate case splits.
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-effective-cores             = 10000

# Maximum total number of running multicollector jobs.
# Default = 4 (< 0 = don't check; 0 = inhibit executions).
# This property may be changed without restarting the server.
#GTDistributed.scheduler.max-postproc                    = 4

# The number of threads used by GTMUX multicollector for postprocessing
# of regular simulation packets. Default is 2.
# Should be changed in concert with 'GTDistributed.scheduler.max-postproc'.
# This property may be changed without restarting the server.
#GTDistributed.postproc.packet.gtmux-thread-count        = 2

# The number of threads used by GTMUX multicollector for postprocessing
# of parametrized external subassemblies. Default is 2.
# Should be changed in concert with 'GTDistributed.scheduler.max-postproc'.
# This property may be changed without restarting the server.
#GTDistributed.postproc.pes.gtmux-thread-count           = 2

# Scheduler strategy.
# Two scheduling strategies are available:
#       fifo-strategy
#       saturating-fifo-strategy
#
# fifo-strategy is the standard first in first out scheduling algorithm that submits to executors
# based on system load (lowest first).
#
# saturating-fifo-strategy behaves just like fifo-strategy, except that packets are submitted to
# executors based on number of free cores (lowest first) and then based on system load
# (lowest first).
#GTDistributed.scheduler.strategy                        = fifo-strategy

# Preemption
# Enabling this will allow the scheduler to intelligently preempt (stop and re-queue) running jobs
# in favor of other jobs. The GTDistributed.scheduler.max-cores-per-user and
# GTDistributed.scheduler.max-cores-per-user-overflow properties set the lower and upper bounds
# on how many running packets are eligible for preemption for a given user. The exact behavior of
# preemption depends on the scheduler strategy chosen.
#GTDistributed.scheduler.preemption-enabled              = false

# How many times a packet can be preempted and automatically resubmitted by the scheduler
#GTDistributed.scheduler.preempt-resubmit-limit          = 3

# An ordered list of users whose jobs will be prioritized above
# unlisted users by the scheduler, within a given priority level.
# Within this list, earlier user names take priority.
# Users are specified as an unquoted comma delimited list of names.
# The '\' character may be used for line continuation if the list
# is too long for one line
# This property may be changed without restarting the server.
#GTDistributed.scheduler.users-above-default-priority =

# A ordered list of users whose jobs will be prioritized below
# unlisted users by the scheduler, within a given priority level.
# Within this list, earlier user names take priority.
# Users are specified as an unquoted comma delimited list of names
# The '\' character may be used for line continuation if the list
# is too long for one line
# This property may be changed without restarting the server
# GTDistributed.scheduler.users-below-default-priority =

# Minimum size of free file space required, in bytes.
# During system startup it is checked that the file system holding resource
# data has at least this amount of available space. If this check fails on startup, the program
# execution is aborted. It is also checked periodically, and operation is inhibited if the available
# space falls below the value
#
# The default value of 2147483648 equals to 2 GiB.
# This property is merely a safeguard, and it may be modified in the user configuration.
#GTDistributed.file-manager-min-space                    = 2147483648

# Minimum size of predicted free space required after a job has been split
# During job processing it is checked that the file system holding resource
# data will have at least this much free space after a job has been split. The size
# of the job is predicted based on the number of packets and resource file sizes.
#
# The default value of 2147483648 equals to 2 GiB.
# This property is a safeguard, and it may be modified by the system administrator
#GTDistributed.file-manager-min-predicted-free-space          = 2147483648

# File path to the web admin portal credential file.
# The distributed web status page supports an admin portal allowing cluster administrators
# to perform a subset of actions on jobs for maintenance purposes. A credential file that contains
# the authorized users logon information (stored as a username, and a salted hash of the password)
# must be provided to enable this feature.
#
# This file can be generated and manipulated (add users, delete users, reset a password)
# through the gtdistdpasswwd script cli utility found in $GTIHOME/{version}/distributed/bin
# On Windows, either forward slashes or double back slashes must be used as path
# separators--single back slashes will result in a configuration error.
#GTDistributed.web.credentials-file                      =

################################################################################
#                         CONNECTION FILTERS (ACCESS CONTROL)                  #
################################################################################
# Rules should be of the form "[+|-][ip|host][\cidr (optional)]" and be
# separated by the ";" character. The leading "+" or "-" character indicates
# whether it is a whitelist rule or a blacklist rule. Next is either a host
# name, or an IP address with optional CIDR designation for subnet.
#
# If this is property is left blank, all connections will be accepted. However,
# if any rules are defined, then any connection not explicitly allowed will be
# rejected.
#
# An address will be accepted if and only if both of the following are true:
#   1) There is at least one whitelist rule that matches the address
#   2) There are no blacklist rules that match the address
#
# For example "+192.168.100.0/24;+[fd00::]/64;-192.168.100.128;-badhost.example.com"
# will accept connections only from IPs in the range 192.168.100.0 to 192.168.100.255
# as well as from addresses [fd00::]/64 IPv6 prefix, with the exception of
# 92.168.100.128, which will be rejected. In addition any connection from
# -badhost.example.com will also be rejected. This allows whitelisting of an
# entire subnet, and then disabling specific hosts via ip or name. When no subnet
# mask or prefix length is specified, the provided address is understood to be a
# single address. Note that a connection from 192.168.100.128 will be allowed if
# it also has an [fd00::] IPv6 address and it attempts to connect over IPv6.
#
# IPv6 addresses can be specified in [square brackets] or without them, are case
# insensitive, and can be in their long or condensed forms. Currently the default
# route [::]/0 is not fully supported as it is with IPv4, so if IPv6 needed it
# is recommended to manually specify allowed prefixes. When the IPv4 default
# route is specified (default), all IPv6 global unicast addresses will be
# allowed to connect.
#
# While rules may be created using host names, we recommend using ip address
# / subnet rules wherever feasible for the following reason: if a connection filter
# fails to resolve while the scheduler is running, the entire set of filters
# is considered invalid. This will cause the scheduler to refuse all connections
# the rule would otherwise apply to while the host name cannot be resolved.
#
# These access rules do not apply to legacy connections from clients v2016 and older.
# As a security precaution, they can be disabled altogether by setting
# "GTDistributed.legacy.enable" property to "false" (see at beginning of this file).
#
# This property may be changed without restarting the server, but will only
# affect new connections to the server. Existing connections will be unaffected.
# To affect existing connections, the server must be restarted.

# List of filters for incoming connections from the clients.
#GTDistributed.client.ip-filter                          = +0.0.0.0/0

# List of filters for incoming connections from the executors.
#GTDistributed.server.ip-filter                          = +0.0.0.0/0

################################################################################
#                              LOGGING CONFIGURATION                           #
################################################################################
# Default values below are commented out. They should be good in most
# circumstances.

# Logging directory. By default it's relative to the working directory defined
# in the beginning of this file. If this directory doesn't exist at the startup,
# it'll be created automatically. On Windows, either forward slashes or
# double back slashes must be used as path separators--single back slashes will
# result in a configuration error.
#GTDistributed.log-dir                                   = ${GTDistributed.work-dir}/log

# Base name of the log file. A sequence number will be added at the end.
#GTDistributed.log-file-base                             = gtdistd.log

# Maximum size, in bytes, of a log file before it's rotated.
java.util.logging.FileHandler.limit                     = 10000000

# How many log files to keep.
java.util.logging.FileHandler.count                     = 25

# Logger threshold levels.
# Valid values: OFF, FINEST, FINER, FINE, CONFIG, INFO, WARNING, SEVERE, ALL.
#com.gtisoft.distd.level                                 = INFO
#com.gtisoft.distd.network.log.level                     = WARNING

################################################################################
#                                 REPORTING                                    #
################################################################################
# Optional reporting functionality.

# The job summary service is a feature which outputs a summary of job attributes
# to a csv file upon a job finishing.

# The information recorded corresponds to the following attributes:
# |Job-ID|Owner|Client|Version|Model Name|Priority|Creation Time|Finish Time|Total Time (secs)|
# |Status|# Packets|# Cases|# Completed Cases|# Skipped Cases|Total Solver Time (secs)|License Type|
# |Add-on Licenses|

# Whether the job summary service is enabled.
GTDistributed.job-summary-service-enable               = false

# Time Duration in hours before the job summary service rolls over to a new file.
# Default is 168 hours = 1 week.
# GTDistributed.job-summary-rollover-duration            = 168

# Number of jobs to record before the job summary service rolls over to a new file.
# GTDistributed.job-summary-rollover-lines               = 100000

# Maximum number of job summary files to keep in the directory before deleting the
# oldest one.
GTDistributed.job-summary-max-files                    = 52

# Base name of the job summary files. A timestamp number will be added in addition
# to a .csv extension. Ex: completed_jobs_20180711135215.csv
# GTDistributed.job-summary-file-base                    = completed_jobs_

# Directory to store job summary files. By default it's relative to the working
# directory defined in the beginning of this file. If this directory doesn't exist
# at the startup, it'll be created automatically. On Windows, either forward slashes or
# double back slashes must be used as path separators--single back slashes will
# result in a configuration error.
GTDistributed.job-summary-directory                    = ${GTDistributed.work-dir}/reports

# PREVIOUS CHANGES and CHANGES FROM NEEHAR copied from v2021 to v2022 06/09/2022
################################################################################
#                                 PREVIOUS CHANGES                             #
################################################################################
GTDistributed.scheduler.validation.solverVersion = OFF
GTDistributed.scheduler.validation.solverBuild = OFF
GTDistributed.transaction-log-directory = ${GTDistributed.work-dir}/state
################################################################################
#                          CHANGES FROM NEEHAR 05/06/2021                      #
################################################################################

# The properties below just create an association between the products and licenses.
# For the cloud setup, we are currently supporting just GTSUITE, GTAUTOLIONONED and
# GTPOWERRT licenses
GTDistributed.scheduler.license-for.GTAUTOLION=GTAUTOLIONONED
GTDistributed.scheduler.license-for.GTDRIVE=GTSUITE
GTDistributed.scheduler.license-for.GTPOWER=GTSUITE
GTDistributed.scheduler.license-for.GTPOWERLAB=GTSUITE
GTDistributed.scheduler.license-for.GTPOWERXRT=GTPOWERXRT
GTDistributed.scheduler.license-for.GTSUITE=GTSUITE
GTDistributed.scheduler.license-for.GTSUITEMP=GTSUITE
GTDistributed.scheduler.license-for.XLINK=GTSUITE


# The property below will throw a validation error when submitting jobs with
# unsupported licenses. This will prevent jobs from being submitted to the
# scheduler if the required license is not permitted on the server
GTDistributed.scheduler.validation.modelLicense=REQUIRED


# The property below is 'hot-reloadable' and will be changed dynamically
# based on current entitlements. Only the licenses which have non-zero balance
# will be permitted at any given time
GTDistributed.scheduler.validation.permitted-licenses=GTSUITE,GTPOWERXRT,GTAUTOLIONTHREED,GTXCHEM,GTADVANCEDCOMBUSTION


# The properties below are 'hot-reloadable' and will be changed dynamically
# based on current entitlements. The max-license count will be set to 0
# when the current balance for a license becomes 0. This will ensure that
# no new Queued packets will be submitted for execution. The value should be
# -1 otherwise.
GTDistributed.scheduler.max-licenses.GTSUITE=-1
GTDistributed.scheduler.max-licenses.GTAUTOLIONONED=-1
GTDistributed.scheduler.max-licenses.GTPOWERXRT=-1
GTDistributed.scheduler.max-licenses.GTADVANCEDCOMBUSTION=-1
GTDistributed.scheduler.max-licenses.COSIMTHERMAL=-1
GTDistributed.scheduler.max-licenses.GTAUTOLIONTHREED=-1
GTDistributed.scheduler.max-licenses.GTJMAGMACHINE=-1
GTDistributed.scheduler.max-licenses.GTLINEAR=-1
GTDistributed.scheduler.max-licenses.GTTHREEDMBD=-1
GTDistributed.scheduler.max-licenses.GTTHREEDMBDADVANCEDTRIBOLOGY=-1
GTDistributed.scheduler.max-licenses.GTTHREEDMBDMACHINERY=-1
GTDistributed.scheduler.max-licenses.GTTHREEDMBDVEHICLEDYNAMICS=-1
GTDistributed.scheduler.max-licenses.GTXCHEM=-1


################################################################################
#                    PROPERTIES BELOW MOST NOT BE CHANGED                      #
################################################################################
GTDistributed.job-contexts                              = scheduler
GTDistributed.server.connector                          = rpc-acceptor
GTDistributed.client.connector                          = rpc-acceptor
GTDistributed.client.call-retry-time                    = 0
GTDistributed.client.call-retry-time-max                = 0

### END OF FILE
